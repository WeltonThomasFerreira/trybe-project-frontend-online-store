(this["webpackJsonpsd-0x-project-frontend-online-store"]=this["webpackJsonpsd-0x-project-frontend-online-store"]||[]).push([[0],{15:function(e,t){e.exports={container:"flex flex-col content-around max-w-sm\nrounded overflow-hidden shadow-lg w-64 h-72 justify-around",button:'flex flex-col content-around max-w-sm rounded\noverflow-hidden shadow-lg w-64 h-72 justify-around"\ndata-testid="product-detail-link',h2:"sm:text-sm sm:leading-snug font-semibold\ntracking-wide uppercase text-grey-600 mb-3",imageContainer:"flex justify-center",image:"w-24 object-center",p:"justify-self-end"}},16:function(e,t){e.exports={form:"w-full max-w-sm",inputContainer:"flex items-center border-b border-teal-500 py-2",input:"appearance-none bg-transparent border-none w-full\ntext-gray-700 mr-3 py-1 px-2 leading-tight focus:outline-none",button:"flex-shrink-0 border-transparent border-4 text-white\nhover:text-white text-sm py-1 px-2 rounded bg-pink-600",searchIcon:"h-5 w-5 text-white-500"}},17:function(e,t){e.exports={container:"fixed z-40 inset-0 flex-none h-full bg-black bg-opacity-25\nw-full lg:bg-white lg:static lg:h-auto lg:overflow-y-visible\ng:pt-0 lg:w-60 xl:w-72 lg:block hidden",asideContainer:"h-full overflow-y-auto scrolling-touch lg:h-auto lg:block\nlg:relative lg:sticky lg:bg-transparent overflow-hidden\nlg:top-18 bg-white mr-24 lg:mr-0",aside:"px-1 pt-6 overflow-y-auto font-medium text-base sm:px-3\nxl:px-5 lg:text-sm pb-10 lg:pt-10 lg:pb-14 sticky?lg:h-(screen-18)",h5:"text-gray-900 uppercase tracking-wide\nfont-semibold mb-3 text-sm lg:text-xs",input:"bg-transparent hover:bg-pink-500 text-pink-700\nfont-semibold hover:text-white py-2 px-4 hover:border-transparent\nrounded w-64 text-left"}},19:function(e,t){e.exports={header:"relative z-10 max-w-screen-lg xl:max-w-screen-xl mx-auto",homeContainer:"space-y-5 sm:space-y-8\nmd:space-y-10 lg:space-y-11 overflow-hidden",formContainer:"border-b border-gray-200 py-4 flex items-center\njustify-between -mx-4 px-4 sm:mx-0 sm:px-0",initialMessage:"mt-1 text-lg text-gray-500"}},21:function(e,t){e.exports={buttonContainer:"flex items-center space-x-6 sm:space-x-10 ml-6 sm:ml-10",link:"text-base leading-6 font-medium hover:text-gray-600\ntransition-colors duration-200 py-2",shoppingCartIcon:"h-9 w-9 text-pink-500 sm:inline"}},28:function(e,t){e.exports={button:"bg-green-500 hover:bg-green-700\ntext-white font-bold py-2 px-4 rounded w-full"}},31:function(e,t,a){e.exports=a(49)},36:function(e,t,a){},37:function(e,t,a){},39:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(27),o=a.n(c),i=(a(36),a(8)),s=a(9),l=a(11),u=a(10),d=a(12),m=a(1),p=(a(37),a(6)),h=a.n(p),b=a(23),f=a(13),g=a(2);function y(){return r.a.createElement("div",null,r.a.createElement("p",null,"Nenhum produto foi encontrado"))}var v=a(30),E=a(28);function x(e){var t=e.selectedProduct,a=e.dataTestId;return r.a.createElement("button",{className:E.button,"data-testid":a,type:"button",onClick:function(){!function(e){var t=[],a=JSON.parse(localStorage.getItem("cart"));null!==a&&(t=Object(v.a)(a)),t.push(e),localStorage.setItem("cart",JSON.stringify(t))}(t)}},"Add")}a(39);var C=a(15);function k(e){var t=e.products,a=e.handleClick;return t.length===[]?r.a.createElement(y,null):t.map((function(e){return r.a.createElement("div",{className:C.container,key:e.id},r.a.createElement("button",{className:C.button,type:"button",value:e.title,"data-testid":"product-detail-link",onClick:function(){a(e)}},r.a.createElement("div",{"data-testid":"product"},r.a.createElement("h2",{className:C.h2},e.title),r.a.createElement("div",{className:C.imageContainer},r.a.createElement("img",{className:C.image,src:e.thumbnail,alt:e.title})),r.a.createElement("p",{className:C.p},new Intl.NumberFormat("pr-BR",{style:"currency",currency:"BRL"}).format(e.price)))),r.a.createElement(x,{selectedProduct:e,dataTestId:"product-add-to-cart"}))}))}var w=a(20),N=a(16);function j(e){var t=e.query,a=e.handleChange,n=e.handleSubmit;return r.a.createElement("form",{className:N.form,onSubmit:n},r.a.createElement("div",{className:N.inputContainer},r.a.createElement("input",{className:N.input,name:"query",value:t,placeholder:"Pesquisar produtos...",onChange:a,"data-testid":"query-input"}),r.a.createElement("button",{className:N.button,type:"submit","data-testid":"query-button"},r.a.createElement(w.a,{className:N.searchIcon}))))}function P(){return O.apply(this,arguments)}function O(){return(O=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://api.mercadolibre.com/sites/MLB/categories").then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){return I.apply(this,arguments)}function I(){return(I=Object(f.a)(h.a.mark((function e(t,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://api.mercadolibre.com/sites/MLB/search?category=".concat(t,"&q=").concat(a)).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=a(17);function F(e){var t=e.categories,a=e.handleChange;return 0===t.length?null:r.a.createElement("div",{className:q.container},r.a.createElement("div",{className:q.asideContainer},r.a.createElement("aside",{className:q.aside},r.a.createElement("h5",{className:q.h5},"Categorias:"),r.a.createElement("ul",null,t.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("input",{className:q.input,"data-testid":"category",name:"selectedCategory",onClick:a,type:"button",value:e.name,id:e.id}))}))))))}var B=a(21);function D(){return r.a.createElement("div",{className:B.buttonContainer},r.a.createElement(d.b,{className:B.link,to:"/cart"},r.a.createElement("button",{type:"button","data-testid":"shopping-cart-button"},r.a.createElement(w.b,{className:B.shoppingCartIcon}))))}var J=a(19),L=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={query:"",categories:[],products:[],selectedCategory:"",redirect:!1},n.handleChange=n.handleChange.bind(Object(g.a)(n)),n.fetchProducts=n.fetchProducts.bind(Object(g.a)(n)),n.fetchCategories=n.fetchCategories.bind(Object(g.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(g.a)(n)),n.handleClick=n.handleClick.bind(Object(g.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){localStorage.getItem("cart")||(localStorage.setItem("cart",JSON.stringify([])),console.log("criou")),this.fetchCategories()}},{key:"handleChange",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n,r,c,o,i=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target,n=a.name,r=a.type,c=a.value,o=a.id,"button"===r?this.setState(Object(b.a)({},n,o),(function(){return i.fetchProducts()})):this.setState(Object(b.a)({},n,c));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(e){e.preventDefault(),this.fetchProducts()}},{key:"handleClick",value:function(e){localStorage.setItem("selectedProduct",JSON.stringify(e)),this.setState({redirect:!0})}},{key:"fetchCategories",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:t=e.sent,this.setState({categories:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchProducts",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t,a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.query,n=t.selectedCategory,e.next=3,S(n,a);case 3:r=e.sent,this.setState({products:r.results});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.products,a=e.categories,n=e.redirect,c=e.query;return n?r.a.createElement(m.a,{to:"/product-details"}):r.a.createElement("div",{className:J.homeContainer},r.a.createElement("header",{className:J.header},r.a.createElement("div",{className:J.formContainer},r.a.createElement(j,{handleChange:this.handleChange,query:c,handleSubmit:this.handleSubmit}),r.a.createElement(D,null))),r.a.createElement("main",{className:"main-content"},r.a.createElement(F,{categories:a,handleChange:this.handleChange}),r.a.createElement("section",{className:"container-products"},0===t.length&&r.a.createElement("p",{className:J.initialMessage,"data-testid":"home-initial-message"},"Digite algum termo de pesquisa ou escolha uma categoria."),r.a.createElement(k,{products:t,handleClick:this.handleClick}))))}}]),a}(n.Component),M=(a(48),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={numberProductsCart:1,totalPrice:0},n.productIncreaseQuantity=n.productIncreaseQuantity.bind(Object(g.a)(n)),n.productDecreaseQuantity=n.productDecreaseQuantity.bind(Object(g.a)(n)),n.handlePrice=n.handlePrice.bind(Object(g.a)(n)),n.multiplyPrice=n.multiplyPrice.bind(Object(g.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.handlePrice()}},{key:"handlePrice",value:function(){var e=this.props.product.price;this.setState({totalPrice:e})}},{key:"productIncreaseQuantity",value:function(){var e=this;this.setState((function(e){return{numberProductsCart:e.numberProductsCart+1}}),(function(){e.multiplyPrice()}))}},{key:"productDecreaseQuantity",value:function(){var e=this,t=this.state.numberProductsCart;this.setState((function(e){return{numberProductsCart:e.numberProductsCart-1}}),(function(){if(t<=0)return e.setState({numberProductsCart:0});e.multiplyPrice()}))}},{key:"multiplyPrice",value:function(){var e=this.state.numberProductsCart,t=this.props.product.price;this.setState({totalPrice:e*t})}},{key:"render",value:function(){var e=this.props,t=e.product,a=e.removeProduct,n=this.state,c=n.numberProductsCart,o=n.totalPrice,i=t.title,s=t.thumbnail,l=t.id;return r.a.createElement("div",{className:"product-cart-body",id:l},r.a.createElement("button",{type:"button",className:"button-remove-product",onClick:a},"X"),r.a.createElement("section",{className:"body-product"},r.a.createElement("img",{width:"150px",src:s,alt:"Imagem do produto ".concat(i)})),r.a.createElement("section",{className:"product-name"},r.a.createElement("p",{"data-testid":"shopping-cart-product-name"},i)),r.a.createElement("section",{className:"add-product-body"},r.a.createElement("button",{type:"button",className:"btn-product btn-decrease","data-testid":"product-decrease-quantity",onClick:this.productDecreaseQuantity},"-"),r.a.createElement("p",{className:"number-products-cart","data-testid":"shopping-cart-product-quantity"},c),r.a.createElement("button",{type:"button",className:"btn-product btn-add","data-testid":"product-increase-quantity",onClick:this.productIncreaseQuantity},"+")),r.a.createElement("section",{className:"price-body"},"R$ ".concat(o)))}}]),a}(n.Component)),Q=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).importFromStorage=n.importFromStorage.bind(Object(g.a)(n)),n.mapProducts=n.mapProducts.bind(Object(g.a)(n)),n.recoveryTotalPrice=n.recoveryTotalPrice.bind(Object(g.a)(n)),n.removeProduct=n.removeProduct.bind(Object(g.a)(n)),n.state={totalPrice:0,shoppingCart:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){null===localStorage.getItem("cart")?localStorage.setItem("cart",JSON.stringify([])):this.importFromStorage()}},{key:"importFromStorage",value:function(){var e=this,t=JSON.parse(localStorage.getItem("cart"));this.setState({shoppingCart:t},(function(){return e.recoveryTotalPrice()}))}},{key:"recoveryTotalPrice",value:function(){var e=this.state.shoppingCart.reduce((function(e,t){return e+=t.price}),0);this.setState({totalPrice:e})}},{key:"removeProduct",value:function(e){var t=e.target;t.parentNode.parentNode.removeChild(t.parentNode)}},{key:"mapProducts",value:function(){var e=this;return this.state.shoppingCart.map((function(t){return r.a.createElement(M,{key:t.id,product:t,removeProduct:e.removeProduct})}))}},{key:"render",value:function(){var e=r.a.createElement("p",{"data-testid":"shopping-cart-empty-message"},"Seu carrinho est\xe1 vazio"),t=this.state,a=t.totalPrice,n=t.shoppingCart,c=new Intl.NumberFormat("pr-BR",{style:"currency",currency:"BRL"}).format(a);return r.a.createElement("main",{className:"shopping-cart-page"},r.a.createElement("header",{className:"header-cart"},r.a.createElement(d.b,{to:"/"},"Voltar"),r.a.createElement("h1",null,"Carrinho de Compras")),r.a.createElement("section",{className:"products"},0===n.length?e:this.mapProducts()),r.a.createElement("section",{className:"total-price"},r.a.createElement("p",null,"Valor total da compra: ".concat(c))),r.a.createElement("button",{type:"button"}," Finalizar Compra "))}}]),a}(n.Component),R=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={product:{}},n.retrieveFromLocalStorage=n.retrieveFromLocalStorage.bind(Object(g.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.retrieveFromLocalStorage()}},{key:"retrieveFromLocalStorage",value:function(){var e=localStorage.getItem("selectedProduct"),t=JSON.parse(e);this.setState({product:t})}},{key:"render",value:function(){var e=this.state,t=e.product,a=t.title,n=t.thumbnail,c=t.price,o=e.product;return r.a.createElement("main",{className:"product-details-page"},r.a.createElement("header",{className:"header-product-details"},r.a.createElement(D,null)),r.a.createElement("div",{"data-testid":"product-detail-name"},r.a.createElement("p",null,a),r.a.createElement("img",{width:"100px",src:n,alt:a}),r.a.createElement("p",null,new Intl.NumberFormat("pr-BR",{style:"currency",currency:"BRL"}).format(c)),r.a.createElement(x,{selectedProduct:o,dataTestId:"product-detail-add-to-cart"})))}}]),a}(r.a.Component),T=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(d.a,{basename:"/trybe-project-frontend-online-store"},r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/product-details",component:R}),r.a.createElement(m.b,{path:"/cart",component:Q}),r.a.createElement(m.b,{exact:!0,path:"/",component:L}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.d3c1bae3.chunk.js.map